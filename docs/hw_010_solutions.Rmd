---
title: 'Домашнее задание 1.'
date: 'May 24, 2018'
output:
  html_document:
    keep_md: yes
    number_sections: yes
    toc: yes
lang: ru-RU
editor_options:
  chunk_output_type: console
---

Домашнее задание можно выполнять на данных с которымии вы работаете :)
Если таких нет, то можно использовать данные про хлопья для завтрака `cereal.csv`.

Описание данных:

- Name - название производителя хлопьев

- mfr - название производителя

- type - тип хлопьев

- protein - белки, в гм на порцию

- fat - жиры в гм  на порцию

- sodium - натрий в мг на порцию

- fiber - клетчатка в гм на порцию

- carbo - углеводы в гм на порцию

- sugars - сахар в гм на порцию
 
- potass - калий в мг на порцию

- vitamins - витамины и минералы

- shelf - полка, на которой хлопья стоят в магазине, считая от пола

- weight - вес одной порции в унциях 

- cups - число чашек в порции

- rating - оценка хлопьев покупателями

1. Подключите библиотеки `tidyverse`, `rio`, `skimr`.

```{r}
library(tidyverse)
library(rio)
library(skimr)
```


2. Загрузите данные из файла `cereal.csv` (или из вашего файла) и
сохраните их в переменной под названием `df`.
Для этого нужно воспользоваться функцией `import` из пакета `rio`.
Проверьте, что данные загрузились с помощью команд `glimpse`, `head` и `tail`.

```{r}
df <- import('cereal.csv')
glimpse(df)
head(df)
tail(df)
```

3. Посмотрите на описательные статистики. 
Здесь пригодится функция `skim()` из пакета `skimr()`.

```{r}
skim(df)
```

- Сколько в выборке наблюдений? Сколько переменных? *77*, *16*

- Есть ли в данных пропущенные переменные? *Нет*

- Сколько в среднем калорий содержится в порции хлопьев? *106.88*

4. Постройте гистограммы для калорий (столбец `calories`) и для производителей (столбец `mfr`).
Не забудьте подписать оси и добавить название.
Для выполнения упражнения понадобится команда `qplot`.

```{r}
qplot(data = df, x = calories) +
  labs(x = 'Калории', y = 'Количество', title = 'Распределение калорий')

qplot(data = df, x = mfr) +
  labs(x = 'Производитель', y = 'Количество', title = 'Производители хлопьев')
```

5. С помощью той же команды `qplot` постройте диаграмму рассеяния для переменных `carbo` (по оси абсцисс) и `fiber` (по оси ординат). Не забудьте про название графика и осей!

```{r}
qplot(data = df, x = carbo, y = fiber) +
  labs(x = 'Углеводы', y = 'Клетчатка', title = 'Углеводы и клетчатка в хлопьях')
```

6. Выберите из данных те наблюдения, в которых сахара (`sugars`) в проции больше, чем 10 г, а белков (`protein`) — меньше, чем в средней порции. Cохраните их под названием `df_sub`. Посмотрите на описательные статистики.
```{r}
df_sub <- filter(df, sugars > 10, protein < mean(protein))
skim(df_sub)
```

- Сколько в среднем клетчатки в отобранных данных? *0.43*

7. Добавьте в исходные данные `df` столбец `weight_g` с весом пачки хлопьев в граммах.
Вам понадобится функция `mutate`. В одной унции приблизительно 28 грамм :)

```{r}
df <- mutate(df, weight_g = weight * 28)
skim(df)
```
Какой средний вес порции хлопьев в граммах? *28.83*


8. Отсортируйте исходные данные `df` по рейтингу покупателей с помощью функции `arrange`, сохраните результат в переменной `sorted` и посмотрите на её содержимое.

```{r}
sorted <- arrange(df, rating)
sorted
```
- Какова самая низкая оценка покупателей? Самая высокая? *18.04*, *93.7*

9. Экспортируйте отсортированные данные `sorted` в файл формата `xlsx` с названием `cereal_sorted.xlsx`.

```{r}
export(sorted, 'cereal_sorted.xlsx')
```

