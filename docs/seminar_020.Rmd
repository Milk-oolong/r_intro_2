---
title: 'Семинар 2. '
date: 'May 22, 2018'
output:
  html_document:
    keep_md: no
    number_sections: yes
    toc: yes
lang: ru-RU
editor_options:
  chunk_output_type: console
---

# Гремучая смесь R и маркдаун

В нашем документе смешан код R внутри сереньких блоков и текст с разметкой маркдаун.
Эту смесь можно превратить в готовый документ,
нажав на клубок ниток со словом `Knit` прямо над документом.

Попробуйте кликнуть `Knit`:)

Будьте осторожны при редактировании R-маркдаун!
Например, если Вовочка удалит один закрывающий разделитель,
то компьютер будет воспринимать человеческий текст как команды R и выдаст ошибку.

Основные опции блоков кода:
  - message=TRUE/FALSE - выводить ли в отчёт *сообщения*
  - warning=TRUE/FALSE - выводить ли в отчёт *предупреждения*
  - echo=TRUE/FALSE - копировать ли в отчёт сами команды R
  - eval=TRUE/FALSE - выполнять ли команды внутри блока кода
  - "Самый важный шмат кода" - название блока кода :)

Подробнее про фантастические возможности R+маркдаун: `Help` - `Cheatsheets` - `R markdown`.

Сделайте свой Rstudio уютненьким: `Tools` - `Global Options` - `Appearance` :)

# Работа с очень качественными переменными.

В R есть много типов переменных, например:
  - количественные (double, dbl)
  - целочисленные (integer, int)
  - дата и время (datetime, dttm)
  - логические (logical, lgl)
  - качественные/категориальные/факторные (factor, fctr)
  - текстовые (character, chr)

Существенной разницы между текстовыми и качественными нет.
Отличия качественных от текстовых:
  - ограничено количество значений, скажем только "зима", "весна", "лето", "осень"
  - можно задать порядок "магистр" > "бакалавр" > "школьник"
  - занимают меньше места в памяти

Подключаем нужные пакеты и вперёд!
```{r}
library(tidyverse) # обработка данных, графики...
library(vcd) # графики для качественных переменных
library(skimr) # описательные статистики
```

Посмотрим на качественную переменную цвет:
```{r}
table(diamonds$color)
```

Попробуем объединить три категории в одну: "D", "E", "F" в "United":
```{r}
diamonds2 <- mutate(diamonds, color = fct_collapse(color, United = c('D', 'E', 'F')))
table(diamonds2$color)
```

Упражнение 1.

Объедините категории "Premium" и "Ideal" огранки `cut` в категорию "Best"
```{r}
diamonds3 <- mutate(diamonds, cut = fct_collapse(___, ___))
table(diamonds3$cut)
```


Ура :)
